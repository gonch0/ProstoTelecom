"use strict";(function(){var e=function(e,t){var n=document.querySelector("."+t);var s=document.querySelector("."+e);n.classList.remove(t+"--nojs");s.addEventListener("click",function(){if(n.classList.contains(t+"--closed")){n.classList.remove(t+"--closed");n.classList.add(t+"--opened")}else{n.classList.add(t+"--closed");n.classList.remove(t+"--opened")}})};e("page-header__toggle","page-header");var t=document.querySelectorAll(".main-menu__item");var n=function(e){var t=e.querySelector(".main-menu__title");t.addEventListener("click",function(){if(e.classList.contains("main-menu__item--expanded")){e.classList.remove("main-menu__item--expanded")}else{e.classList.add("main-menu__item--expanded")}})};for(var s=0;s<t.length;s++){n(t[s])}})();(function(){var s=document.querySelectorAll(".slider__item");var e=document.querySelector(".slider__btn--prev");var t=document.querySelector(".slider__btn--next");var r=document.querySelectorAll(".slider__toggle");var c=0;var o=function(e){if(e<0){e=3}else if(e>3){e=0}return e};var n=function(e){for(var t=0;t<r.length;t++){if(r[t].classList.contains("slider__toggle--current")){c=t}}c=o(c);var n=o(c-1);if(e){n=o(c+1)}r[c].disabled=false;r[c].classList.remove("slider__toggle--current");s[c].classList.remove("slider__item--current");r[n].disabled=true;r[n].classList.add("slider__toggle--current");s[n].classList.add("slider__item--current")};e.addEventListener("click",function(){n(false)});t.addEventListener("click",function(){n(true)})})();var connectControls=function(r,c){var e=document.querySelectorAll("."+r);var t=document.querySelectorAll("."+c);var n=function(n,s){n.addEventListener("click",function(){var e=document.querySelector("."+r+"--current");e.disabled=false;e.classList.remove(r+"--current");n.disabled=true;n.classList.add(r+"--current");var t=document.querySelector("."+c+"--current");t.classList.remove(c+"--current");s.classList.add(c+"--current")})};for(var s=0;s<e.length;s++){n(e[s],t[s])}};connectControls("info__button","content__block");connectControls("directions__button","descriptions__item");connectControls("slider__toggle","slider__item");connectControls("account__toggle","account__tab");connectControls("feedback__toggle","feedback__tab");(function(){var r=function(e){var t=document.querySelector(".content__block--current");var n=t.querySelector(".content__list");var s=n.querySelector(".content__item");var r=["title","text","date"];var c=document.createDocumentFragment();for(var o=0;o<e.length;o++){var i=s.cloneNode(true);for(var l=0;l<r.length;l++){var a=r[l];var d=e[o][a];i.querySelector(".content__"+a).textContent=d;i.querySelector(".content__date").setAttribute("datetime",e[o]["datetime"])}c.appendChild(i)}n.appendChild(c)};var c=function(e){var t={success:200,error:400};var n={get:"GET",post:"POST"};var s=new XMLHttpRequest;s.overrideMimeType("application/json");s.open(n.get,e);s.onload=function(){if(s.status>=t.success&&s.status<t.error){var e=JSON.parse(s.responseText);r(e)}else{alert("Ошибка обмена данными с сервером ("+s.status+")")}};s.onerror=function(){alert("Ошибка соединения с сервером")};s.send()};var e=function(e,t){var n=document.querySelector(".content__"+e);var s=n.querySelector(".content__button");s.addEventListener("click",function(){c(t)})};e("news","js/news.json");e("publications","js/pubs.json")})();(function(){var e=function(e,t){var n=document.querySelector("."+t);var s=document.querySelector("."+e);var r=n.querySelector(".popup__btn-close");s.addEventListener("click",function(){n.classList.add("popup--active")});r.addEventListener("click",function(){n.classList.remove("popup--active")})};e("user-list__btn--login","account");e("user-list__btn--phone","feedback")})();(function(){var e,t,n,s,r,c,o;e=document.getElementsByClassName("custom-select");for(t=0;t<e.length;t++){s=e[t].getElementsByTagName("select")[0];r=document.createElement("DIV");r.setAttribute("class","select-selected select-placeholder");r.setAttribute("tabindex","0");r.innerHTML=s.options[s.selectedIndex].innerHTML;e[t].appendChild(r);c=document.createElement("DIV");c.setAttribute("class","select-items select-hide");for(n=1;n<s.length;n++){o=document.createElement("DIV");o.innerHTML=s.options[n].innerHTML;o.addEventListener("click",function(e){var t,n,s,r,c;r=this.parentNode.parentNode.getElementsByTagName("select")[0];c=this.parentNode.previousSibling;for(n=0;n<r.length;n++){if(r.options[n].innerHTML==this.innerHTML){r.selectedIndex=n;c.innerHTML=this.innerHTML;t=this.parentNode.getElementsByClassName("same-as-selected");for(s=0;s<t.length;s++){t[s].removeAttribute("class")}this.setAttribute("class","same-as-selected");break}}c.click()});c.appendChild(o)}e[t].appendChild(c);r.addEventListener("click",function(e){e.stopPropagation();i(this);this.nextSibling.classList.toggle("select-hide");this.classList.toggle("select-arrow-active");this.classList.remove("select-placeholder")})}function i(e){var t,n,s,r=[];t=document.getElementsByClassName("select-items");n=document.getElementsByClassName("select-selected");for(s=0;s<n.length;s++){if(e==n[s]){r.push(s)}else{n[s].classList.remove("select-arrow-active")}}for(s=0;s<t.length;s++){if(r.indexOf(s)){t[s].classList.add("select-hide")}}}document.addEventListener("click",i)})();